# SimplePaste

ä¸€ä¸ªåŸºäº Cloudflare Workers + KV çš„è½»é‡çº§æ–‡æœ¬åˆ†äº«å·¥å…·ï¼Œ**å®Œå…¨æ— å¤–éƒ¨ä¾èµ–**ï¼Œæ‰€æœ‰ CSS å’Œ JavaScript å‡å†…è”ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- âœ… **æ–‡æœ¬åˆ†äº«** - æ”¯æŒçº¯æ–‡æœ¬åˆ†äº«
- âœ… **å¯†ç ä¿æŠ¤** - å¯é€‰è®¾ç½®è®¿é—®å¯†ç 
- âœ… **é˜…åå³ç„š** - æŸ¥çœ‹ä¸€æ¬¡åè‡ªåŠ¨åˆ é™¤
- âœ… **è¿‡æœŸæ—¶é—´** - å¯è®¾ç½® 1 å°æ—¶ã€1 å¤©ã€7 å¤©ã€30 å¤©æˆ–æ°¸ä¹…
- âœ… **ç®¡ç†åå°** - æŸ¥çœ‹æ‰€æœ‰åˆ†äº«ã€åˆ é™¤ç®¡ç†
- âœ… **å®Œå…¨å…è´¹** - åŸºäº Cloudflare å…è´¹å¥—é¤
- âœ… **æ— å¤–éƒ¨ä¾èµ–** - æ‰€æœ‰èµ„æºå†…è”ï¼Œå®Œå…¨ç¦»çº¿å¯ç”¨

## ğŸ¯ ä¸ CloudPaste çš„åŒºåˆ«

- **æ— å¤–éƒ¨ä¾èµ–**ï¼šæ‰€æœ‰ CSS å’Œ JavaScript å†…è”ï¼Œä¸ä¾èµ–ä»»ä½• CDN
- **ç®€åŒ–åŠŸèƒ½**ï¼šç§»é™¤äº†ä»£ç é«˜äº®ã€è¯­è¨€é€‰æ‹©ç­‰ç¾åŒ–åŠŸèƒ½
- **æ›´è½»é‡**ï¼šé¡µé¢æ›´ç®€æ´ï¼ŒåŠ è½½æ›´å¿«
- **å®Œå…¨ç¦»çº¿**ï¼šæœ¬åœ°å¼€å‘æ—¶æ— éœ€ç½‘ç»œè¿æ¥å³å¯è¿è¡Œ

## ğŸš€ å¿«é€Ÿéƒ¨ç½²

### æ–¹å¼ä¸€ï¼šGitHub Actions è‡ªåŠ¨éƒ¨ç½²ï¼ˆæ¨èï¼‰

1. **Fork æœ¬ä»“åº“**

2. **è·å– Cloudflare å‡­æ®**
   - ç™»å½• [Cloudflare Dashboard](https://dash.cloudflare.com/)
   - è·å– Account IDï¼ˆåœ¨å³ä¾§è¾¹æ ï¼‰
   - åˆ›å»º API Tokenï¼ˆé€‰æ‹© `Edit Cloudflare Workers` æ¨¡æ¿ï¼‰

3. **é…ç½® GitHub Secrets**
   - è¿›å…¥ `Settings` â†’ `Secrets and variables` â†’ `Actions`
   - æ·»åŠ ä»¥ä¸‹ Secretsï¼š
     - `CLOUDFLARE_API_TOKEN` - ä½ çš„ API Token
     - `CLOUDFLARE_ACCOUNT_ID` - ä½ çš„ Account ID
     - `ADMIN_PASSWORD` - ç®¡ç†å¯†ç 
     - `CUSTOM_DOMAIN` - è‡ªå®šä¹‰åŸŸåï¼ˆå¯é€‰ï¼Œå¦‚ï¼špaste.example.comï¼‰

4. **è¿è¡Œéƒ¨ç½²**
   - è¿›å…¥ `Actions` æ ‡ç­¾é¡µ
   - ç‚¹å‡» `Run workflow` â†’ `Run workflow`
   - ç­‰å¾…éƒ¨ç½²å®Œæˆ

### æ–¹å¼äºŒï¼šæ‰‹åŠ¨éƒ¨ç½²ï¼ˆWrangler CLIï¼‰

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone https://github.com/YOUR_USERNAME/SimplePaste.git
   cd SimplePaste
   ```

2. **å®‰è£…ä¾èµ–**
   ```bash
   npm install
   ```

3. **ç™»å½• Cloudflare**
   ```bash
   npx wrangler login
   ```

4. **åˆ›å»º KV å‘½åç©ºé—´**
   ```bash
   npx wrangler kv:namespace create PASTE_KV
   ```
   å°†è¾“å‡ºçš„ `id` å€¼å¤åˆ¶åˆ° `wrangler.toml` æ–‡ä»¶ä¸­ã€‚

5. **è®¾ç½®ç®¡ç†å¯†ç **
   ```bash
   npx wrangler secret put ADMIN_PASSWORD
   ```

6. **éƒ¨ç½²**
   ```bash
   npm run deploy
   ```

## ğŸ’» æœ¬åœ°å¼€å‘

```bash
# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# è®¿é—®
open http://localhost:8787
```

æ³¨æ„ï¼šæœ¬åœ°å¼€å‘æ—¶éœ€è¦åˆ›å»ºä¸€ä¸ªé¢„è§ˆç”¨çš„ KV å‘½åç©ºé—´ï¼š

```bash
npx wrangler kv:namespace create PASTE_KV --preview
```

ç„¶åå°† `preview_id` æ·»åŠ åˆ° `wrangler.toml`ã€‚

## ğŸ“ é¡¹ç›®ç»“æ„

```
SimplePaste/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.ts          # Worker å…¥å£ï¼Œè·¯ç”±å¤„ç†
â”‚   â”œâ”€â”€ types.ts          # TypeScript ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ paste.ts      # åˆ†äº«ç›¸å…³ API
â”‚   â”‚   â”œâ”€â”€ admin.ts      # ç®¡ç†ç›¸å…³ API
â”‚   â”‚   â””â”€â”€ utils.ts      # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ pages/
â”‚       â”œâ”€â”€ home.ts       # é¦–é¡µ HTMLï¼ˆå†…è” CSS/JSï¼‰
â”‚       â”œâ”€â”€ view.ts       # æŸ¥çœ‹é¡µ HTMLï¼ˆå†…è” CSS/JSï¼‰
â”‚       â”œâ”€â”€ admin.ts      # ç®¡ç†é¡µ HTMLï¼ˆå†…è” CSS/JSï¼‰
â”‚       â””â”€â”€ 404.ts        # 404 é¡µé¢ HTMLï¼ˆå†…è” CSSï¼‰
â”œâ”€â”€ wrangler.toml         # Cloudflare Workers é…ç½®
â”œâ”€â”€ tsconfig.json         # TypeScript é…ç½®
â”œâ”€â”€ package.json          # é¡¹ç›®ä¾èµ–
â””â”€â”€ README.md
```

## ğŸ“¡ API æ¥å£

### å…¬å¼€æ¥å£

| æ–¹æ³• | ç«¯ç‚¹ | åŠŸèƒ½ |
|------|------|------|
| `POST` | `/api/paste` | åˆ›å»ºåˆ†äº« |
| `GET` | `/api/paste/:id` | è·å–åˆ†äº«ï¼ˆéœ€å¯†ç éªŒè¯ï¼‰ |
| `GET` | `/api/paste/:id/raw` | è·å–åŸå§‹æ–‡æœ¬ |
| `GET` | `/api/paste/:id/exists` | æ£€æŸ¥åˆ†äº«æ˜¯å¦å­˜åœ¨ |

### ç®¡ç†æ¥å£ï¼ˆéœ€è®¤è¯ï¼‰

| æ–¹æ³• | ç«¯ç‚¹ | åŠŸèƒ½ |
|------|------|------|
| `POST` | `/api/admin/login` | ç®¡ç†å‘˜ç™»å½• |
| `GET` | `/api/admin/list` | è·å–åˆ†äº«åˆ—è¡¨ |
| `DELETE` | `/api/admin/paste/:id` | åˆ é™¤æŒ‡å®šåˆ†äº« |

## ğŸ”’ å®‰å…¨è¯´æ˜

- å¯†ç ä½¿ç”¨ SHA-256 å“ˆå¸Œå­˜å‚¨
- ç®¡ç† Token æœ‰æ•ˆæœŸ 24 å°æ—¶
- é˜…åå³ç„šçš„åˆ†äº«æŸ¥çœ‹åç«‹å³åˆ é™¤
- è¿‡æœŸåˆ†äº«ç”± Cloudflare KV è‡ªåŠ¨æ¸…ç†

## ğŸ“Š Cloudflare å…è´¹é…é¢

| èµ„æº | å…è´¹é…é¢ | è¯´æ˜ |
|------|----------|------|
| Workers è¯·æ±‚ | 100,000 æ¬¡/å¤© | è¶³å¤Ÿä¸ªäººä½¿ç”¨ |
| KV è¯»å– | 100,000 æ¬¡/å¤© | æ¯æ¬¡è®¿é—®åˆ†äº« |
| KV å†™å…¥ | 1,000 æ¬¡/å¤© | æ¯æ¬¡åˆ›å»ºåˆ†äº« |
| KV å­˜å‚¨ | 1 GB | å¯å­˜å‚¨å¤§é‡æ–‡æœ¬ |

## ğŸŒ è‡ªå®šä¹‰åŸŸå

å¦‚æœé…ç½®äº† `CUSTOM_DOMAIN` Secretï¼Œéƒ¨ç½²æ—¶ä¼šè‡ªåŠ¨ç»‘å®šè‡ªå®šä¹‰åŸŸåã€‚ç¡®ä¿ï¼š

1. åŸŸåå·²æ·»åŠ åˆ° Cloudflare è´¦æˆ·å¹¶å·²æ¿€æ´»
2. åŸŸåä¸èƒ½æœ‰ç°æœ‰çš„ CNAME è®°å½•
3. API Token æœ‰è¶³å¤Ÿçš„æƒé™

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0

- âœ… åŸºæœ¬æ–‡æœ¬åˆ†äº«åŠŸèƒ½
- âœ… å¯†ç ä¿æŠ¤
- âœ… é˜…åå³ç„š
- âœ… è¿‡æœŸæ—¶é—´è®¾ç½®
- âœ… ç®¡ç†åå°
- âœ… å®Œå…¨æ— å¤–éƒ¨ä¾èµ–

## ğŸ“„ License

MIT License

## ğŸ™ è‡´è°¢

- [Cloudflare Workers](https://workers.cloudflare.com/) - Serverless å¹³å°
- åŸºäº [CloudPaste](https://github.com/YOUR_USERNAME/CloudPaste) é¡¹ç›®ç®€åŒ–è€Œæ¥
